<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Video App with Wallet</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #000;
      color: #fff;
    }
    #video-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      padding: 20px;
    }
    iframe {
      width: 300px;
      height: 170px;
      border-radius: 10px;
      border: none;
    }
    /* Wallet fixed */
    #wallet {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #111;
      color: #fff;
      padding: 10px 15px;
      border-radius: 8px;
      z-index: 999;
      font-weight: bold;
    }
    /* Withdraw button fixed */
    #withdraw-btn {
      position: fixed;
      bottom: 20px;
      right: 10px;
      z-index: 999;
      padding: 10px 15px;
      background: #f90;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Wallet -->
  <div id="wallet">ðŸ’° Balance: â‚¹<span id="balance">0.00</span></div>

  <!-- Withdraw Button -->
  <button id="withdraw-btn" onclick="withdraw()">Withdraw</button>

  <!-- Video Container -->
  <div id="video-container"></div>

  <!-- Adsterra Ad Code (replace with your ad code) -->
  <div id="ad-container" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; padding:20px; border-radius:8px; z-index:1000;">
    <p style="color:#000; font-weight:bold;">Advertisement</p>
    <script type="text/javascript">
      atOptions = {
        'key' : 'your-adsterra-key',
        'format' : 'iframe',
        'height' : 250,
        'width' : 300,
        'params' : {}
      };
    </script>
    <script type="text/javascript" src="//www.topcreativeformat.com/your-adsterra-script.js"></script>
  </div>

  <script>
    let balance = 0;

    // 1 Lakh Random YouTube IDs
    const videoIds = [];
    for (let i = 0; i < 100000; i++) {
      let randomId = Math.random().toString(36).substring(2, 13);
      videoIds.push(randomId);
    }

    const container = document.getElementById('video-container');
    videoIds.forEach(id => {
      const iframe = document.createElement('iframe');
      iframe.src = `https://www.youtube.com/embed/${id}`;
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
      iframe.allowFullscreen = true;

      // Event - add earning after play (simulated)
      iframe.addEventListener("load", () => {
        balance += 0.50; // earning per video play
        document.getElementById("balance").innerText = balance.toFixed(2);

        // Show Ad after play
        showAd();
      });

      container.appendChild(iframe);
    });

    function withdraw() {
      alert("Your withdrawal is pending review âœ…");
    }

    function showAd() {
      let ad = document.getElementById("ad-container");
      ad.style.display = "block";
      setTimeout(() => {
        ad.style.display = "none";
      }, 5000);
    }
  </script>
</body>
</html>
        </div>
      </div>

      <div class="card small">
        <strong>How it works</strong>
        <ul>
          <li>Click a thumbnail â†’ Ad opens (user action) and video loads in player.</li>
          <li>Credits are applied locally for demo purposes only.</li>
          <li>To enable real payouts you must integrate server-side postbacks + payment provider.</li>
        </ul>
      </div>
    </aside>
  </main>

<script>
/* ========== CONFIG ========== */
const TOTAL = 100000;           // 1 lakh entries
const BATCH_RENDER = 80;        // cards per batch
const POOL = [
  "dQw4w9WgXcQ","3JZ_D3ELwOQ","LXb3EKWsInQ","kJQP7kiw5Fk","fRh_vgS2dFE",
  "9bZkp7q19f0","uelHwf8o7_U","JGwWNGJdvx8","OPf0YbXqDm0","60ItHLz5WEA",
  "K4TOrB7at0Y","RgKAFK5djSk","60V4o1d2hE4","2Vv-BfVoq4g","CevxZvSJLk8",
  "YQHsXMglC9A","YykjpeuMNEk","uelHwf8o7_U","kXYiU_JCYtU","hT_nvWreIhg",
  "aqz-KE-bpKQ","ScMzIvxBSi4","V-_O7nl0Ii0","dQw4w9WgXcQ","sBws8MSXN7A",
  "ysz5S6PUM-U","tgbNymZ7vqY","bC1wK5ThF1U","KIlgR1I1TmM","lWA2pjMjpBs",
  "y6120QOlsfU","2vjPBrBU-TM","6Ejga4kJUts","RgKAFK5djSk","J7U1v1v3p1o",
  "hLQl3WQQoQ0","YykjpeuMNEk","60V4o1d2hE4","ZbZSe6N_BXs","LsoLEjrDogU",
  "3AtDnEC4zak","fJ9rUzIMcZQ","kXYiU_JCYtU","dQw4w9WgXcQ","M7FIvfx5J10",
  "RgKAFK5djSk","C0DPdy98e4c","eVTXPUF4Oz4","hT_nvWreIhg","VbfpW0pbvaU"
];
// Replace with your Adsterra / revenue link
const AD_LINK = "https://www.revenuecpmgate.com/c2fnhr5cn?key=7fd75f43460dfa449333f730863687bc";

/* wallet + storage */
const STORAGE_KEY = "vip_100k_wallet_v4";
let wallet = { balance:0, totalEarned:0, todayEarned:0, points:0, requests:[], dailyCount:0, lastClaimAt:0 };

/* state */
let rendered = 0;
let isAppending = false;
let entriesClicked = new Set();
let mainPlayer = { id:null, vid:null, title:null };

/* DOM refs */
const videoGrid = document.getElementById('videoGrid');
const playerFrame = document.getElementById('playerFrame');
const nowTitle = document.getElementById('nowTitle');
const inlineAdContainer = document.getElementById('inlineAdContainer');
const todayDisplay = document.getElementById('todayDisplay');
const totalDisplay = document.getElementById('totalDisplay');
const balanceDisplay = document.getElementById('balanceDisplay');
const pointsDisplay = document.getElementById('pointsDisplay');
const claimBtn = document.getElementById('claimBtn');
const requestsList = document.getElementById('requestsList');

/* helpers */
function saveState(){ try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(wallet)); }catch(e){} }
function loadState(){ try{ const raw = localStorage.getItem(STORAGE_KEY); if(raw) wallet = JSON.parse(raw); }catch(e){} updateWalletUI(); }
function formatRs(x){ return "â‚¹"+Number(x).toFixed(2); }
function escapeHtml(s){ return (s+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* create single card (on-demand) */
function createCard(index){
  const id = index;
  const vid = POOL[(index-1) % POOL.length];
  const title = `VIP Video #${index}`;
  const thumb = `https://i.ytimg.com/vi/${vid}/hqdefault.jpg`;
  const el = document.createElement('div');
  el.className = 'card';
  el.dataset.index = id;
  el.dataset.title = title.toLowerCase();
  el.innerHTML = `
    <div class="thumbWrap">
      <img class="thumb" src="${thumb}" alt="${escapeHtml(title)}">
      <div class="playBtn">PLAY</div>
    </div>
    <div class="cbody">
      <div>
        <div class="ctitle">${escapeHtml(title)}</div>
        <div class="cmeta">ID: ${id}</div>
      </div>
    </div>
  `;
  // click: open ad (user-initiated), show inline ad, credit locally, load main player
  el.querySelector('.thumbWrap').addEventListener('click', ()=>{
    // 1) open ad in new tab (user action required by networks)
    try { window.open(AD_LINK, "_blank", "noopener"); } catch(e){ console.warn("popup blocked", e); }
    // 2) show inline ad iframe on the page for visibility
    try {
      inlineAdContainer.innerHTML = `<iframe src="${AD_LINK}" width="320" height="250" frameborder="0" scrolling="no"></iframe>`;
      inlineAdContainer.style.display = 'block';
    } catch(e){ console.warn("inline ad error", e); }
    // 3) mark engagement and credit after slight delay
    entriesClicked.add(id);
    setTimeout(()=> creditOnAdOpen(), 700);
    // 4) load video in main player
    playerFrame.src = `https://www.youtube.com/embed/${vid}?rel=0&autoplay=1`;
    nowTitle.innerText = title;
    mainPlayer = { id, vid, title };
  });
  return el;
}

/* render batches (generate on the fly) */
function renderNextBatch(batchSize = BATCH_RENDER){
  if(rendered >= TOTAL) return;
  const frag = document.createDocumentFragment();
  const end = Math.min(rendered + batchSize, TOTAL);
  for(let i = rendered+1; i <= end; i++){
    frag.appendChild(createCard(i));
  }
  videoGrid.appendChild(frag);
  rendered = end;
  document.getElementById('status') && (document.getElementById('status').innerText = `Rendered ${rendered}/${TOTAL}`);
}

/* infinite scroll auto-load */
function setupScrollLoad(){
  window.addEventListener('scroll', ()=>{
    const bottom = window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000;
    if(bottom && !isAppending && rendered < TOTAL){
      isAppending = true;
      setTimeout(()=>{ renderNextBatch(BATCH_RENDER); isAppending = false; }, 150);
    }
  });
}

/* wallet UI */
function updateWalletUI(){
  todayDisplay && (todayDisplay.innerText = formatRs(wallet.todayEarned));
  totalDisplay && (totalDisplay.innerText = formatRs(wallet.totalEarned));
  balanceDisplay && (balanceDisplay.innerText = formatRs(wallet.balance));
  pointsDisplay && (pointsDisplay.innerText = wallet.points);
  renderRequests();
}

/* credit logic on ad-open (client-side demo) */
const CREDIT_PER = 0.50; // â‚¹0.50 per ad-open (client-side)
const POINTS_PER = 5;
const DAILY_LIMIT = 200;
const COOLDOWN_MS = 3000;
function canCredit(){
  const now = Date.now();
  if(wallet.dailyCount >= DAILY_LIMIT) return {ok:false,msg:"Daily limit reached"};
  if(now - (wallet.lastClaimAt || 0) < COOLDOWN_MS) return {ok:false,msg:"Please wait a moment before next credit"};
  return {ok:true};
}
function creditOnAdOpen(){
  const c = canCredit();
  if(!c.ok){ console.warn(c.msg); return; }
  wallet.balance += CREDIT_PER;
  wallet.totalEarned += CREDIT_PER;
  wallet.todayEarned += CREDIT_PER;
  wallet.points += POINTS_PER;
  wallet.lastClaimAt = Date.now();
  wallet.dailyCount = (wallet.dailyCount || 0) + 1;
  saveState();
  updateWalletUI();
}

/* claim button opens ad + credit + show inline ad */
claimBtn.addEventListener('click', ()=>{
  try { window.open(AD_LINK, "_blank", "noopener"); } catch(e){}
  try { inlineAdContainer.innerHTML = `<iframe src="${AD_LINK}" width="320" height="250" frameborder="0" scrolling="no"></iframe>`; inlineAdContainer.style.display='block'; } catch(e){}
  setTimeout(()=> creditOnAdOpen(), 900);
});

/* withdraw request (client-side) */
document.getElementById('btnRequestWithdraw').addEventListener('click', ()=>{
  const method = document.getElementById('payMethod').value;
  const account = document.getElementById('payAccount').value.trim();
  const amount = Number(document.getElementById('payAmount').value);
  if(!account || !amount || amount <= 0){ alert('Enter valid account and amount'); return; }
  if(amount > wallet.balance){ alert('Insufficient balance'); return; }
  wallet.balance -= amount;
  wallet.requests.unshift({ method, account, amount: amount.toFixed(2), status: "Processing", at: Date.now() });
  saveState();
  updateWalletUI();
  alert('Withdraw request submitted. Status: Processing (client-side).');
});

/* render requests */
function renderRequests(){
  if(!requestsList) return;
  if(!wallet.requests || wallet.requests.length === 0){
    requestsList.innerHTML = "<div class='small'>No requests</div>"; return;
  }
  requestsList.innerHTML = wallet.requests.map(r=>{
    return `<div style="padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);margin-bottom:8px">
      <div><strong>${r.method}</strong> â€¢ ${r.account} â€¢ â‚¹${r.amount}</div>
      <div class="small">Status: <strong>${r.status}</strong> â€¢ ${new Date(r.at).toLocaleString()}</div>
    </div>`;
  }).join('');
}

/* search */
document.getElementById('searchInput').addEventListener('input', ()=>{
  const q = document.getElementById('searchInput').value.trim().toLowerCase();
  Array.from(videoGrid.children).forEach(card=>{
    const t = card.dataset.title;
    card.style.display = t.includes(q) ? '' : 'none';
  });
});

/* load/save state */
function initState(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw) wallet = JSON.parse(raw);
  }catch(e){}
  updateWalletUI();
}

/* init */
(function init(){
  initState();
  renderNextBatch(160); // initial quick render
  setupScrollLoad();
  updateWalletUI();
  document.getElementById('loadMoreBtn').addEventListener('click', ()=> renderNextBatch(BATCH_RENDER));
  document.getElementById('refreshBtn').addEventListener('click', ()=> location.reload());
})();
</script>
</body>
</html>
